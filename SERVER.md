–ë–ê–ó–û–í–ò–ô –ù–ê–ë–Ü–† –ö–û–ú–ê–ù–î –î–õ–Ø –¢–í–Ü–ô –°–ï–†–í–ï–† + DOCKER + GIT

1) –£–≤—ñ–π—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh root@46.224.81.114

üóÇ 2) –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ—î–∫—Ç—É
cd /opt/hotel-lotse

üì• 3) –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–¥ –∑ GitHub

(–ü–µ—Ä–µ–¥ –±—É–¥—å-—è–∫–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º!)

cd backend
git pull
cd ..

üõë 4) –ó—É–ø–∏–Ω–∏—Ç–∏ –≤—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
docker compose down

üöÄ 5) –ü—ñ–¥–Ω—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–Ω–æ–≤–æ
docker compose up -d

üîÑ 6) –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ backend (—à–≤–∏–¥–∫–æ)

–Ø–∫—â–æ –∑–º—ñ–Ω–∏–≤ –ª–∏—à–µ –∫–æ–¥ –±–µ–∫–µ–Ω–¥—É:

docker compose restart backend

üîç 7) –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –ª–æ–≥—ñ backend —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
docker logs -f hotel_backend


–í–∏–π—Ç–∏ ‚Üí Ctrl + C

üèÉ 8) –£–≤—ñ–π—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ backend
docker exec -it hotel_backend bash


–í—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ç–∏ –≤–∂–µ —É /app ‚Äî —Ü–µ —Ç–≤–æ—è backend –ø–∞–ø–∫–∞.

üß± 9) –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤—Ä—É—á–Ω—É (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

(–ö–æ–ª–∏ –∑—Ä–æ–±–∏–≤ –∑–º—ñ–Ω–∏ –≤ —Å—Ö–µ–º—ñ –ë–î)

npm run db:migrate

üßë‚Äçüíª 10) –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∏–¥–∏–Ω–≥ —Å—É–ø–µ—Ä-–∞–¥–º—ñ–Ω–∞ —Ä—É–∫–∞–º–∏

(–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à —Ä—ñ–¥–∫–æ, –∞–ª–µ –∫–æ—Ä–∏—Å–Ω–æ –º–∞—Ç–∏)

npm run seed:superadmin

üí• 11) –Ø–∫—â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ —Å—Ç–∞—Ä—Ç—É—î ‚Äî –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –ø–æ–º–∏–ª–∫–∏
docker ps -a
docker logs hotel_backend

üóë 12) –Ø–∫—â–æ —Ö–æ—á–µ—à –ø–æ–≤–Ω—ñ—Å—Ç—é –æ—á–∏—Å—Ç–∏—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–∑—ñ–±—Ä–∞—Ç–∏

(—ñ–Ω–∫–æ–ª–∏ –ø—ñ—Å–ª—è –≤–µ–ª–∏–∫–∏—Ö –∑–º—ñ–Ω –∞–±–æ npm-–ø–æ–º–∏–ª–æ–∫)

docker compose down
docker compose build --no-cache
docker compose up -d

üß† 13) –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ —Å–µ—Ä–≤–µ—Ä —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î
curl http://46.224.81.114:3000


–ú–∞—î –≤–∏–¥–∞—Ç–∏ —Ç–µ–∫—Å—Ç:
Hotel backend is running!

üß∞ 14) –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä backend –∞–∫—Ç–∏–≤–Ω–∏–π
docker ps | grep backend

üîê 15) –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PostgreSQL (—è–∫—â–æ –∫–æ–ª–∏—Å—å –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è)
docker compose restart db

–¶–µ –ø–æ–≤–Ω–∏–π, –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —ñ –±–µ–∑–ø–µ—á–Ω–∏–π –Ω–∞–±—ñ—Ä –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–µ—Ä–≤–µ—Ä–∞, —è–∫–∏–π –∑–∞–∫—Ä–∏–≤–∞—î 99% —Ç–≤–æ—ó—Ö –∑–∞–¥–∞—á:

–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É
–≤—ñ–¥–∫–∞—Ç
–ª–æ–≥—É–≤–∞–Ω–Ω—è
–≤—ñ–¥–ª–∞–¥–∫–∞
—Ä–æ–±–æ—Ç–∞ –∑ Docker
–ø—ñ–¥–Ω—è—Ç—Ç—è —Å–∏—Å—Ç–µ–º–∏